Domains and Bases
=================

Domains
-------

In the Domain menu you can manage the domain managed by your Clouder.

.. image:: images/domain-list.png
.. image:: images/gettingstarted-domain.png

In the domain form, you have to specify :

- The domain, only lowercase, digit, hyphen and dot. are accepted.

- The organization managing the domain.

- The DNS service which will manage the domain.

- If you have one, a wildcard ssl certificate which you’ll be able to use for all subdomains.

- Check the public checkbox if you want all users of the Clouder to be able to use this domain. Otherwise, a user can only access a domain if he is the manager of this domain (or an administrator).

When you save the new record, a configuration file will be installed in the DNS server to manage the domain. You can check the result of the command in the logs

.. image:: images/domain-log.png

You can use the reinstall button if you think the domain has not been correctly installed.


Bases
-----

A base correspond to an url which will be available on the Internet, and often correspond to a database.

.. image:: images/base-list.png

The important fields are :

- The base name. You can only use here lowercase, digit and hyphen.

- The domain to use. The application will be available at the url BASENAME.DOMAIN

- The environment, which define the access right.

- The application of the base. When you select it, some fields like the admin name/email, links and options will be inherited.

- The service which will manage the base. If not filled, a new service will automatically be created.

- You can specify the login/password/email for the admin account. The password will be automatically generated.

- Same for the poweruser login/password/email. A poweruser account is used if we don’t want to give admin access to the user who requested the creation of the base.

- The SSL key/cert for https connection. You can generate automatically with the button Generate Certs, which will call the letsencrypt binary in proxy service.

- If this base can be reset with another base. If yes, you can click on a button to drop the current database et restore it from a dump of the specified base. This is especially useful for staging environment, linked to a production base to have real data. You can also ask that this base is reset each day automatically, useful for demo instance.

- The default language which shall be configured in the application.

- The type of installation which shall be made. Build will make a full installation of the application, while restore (not yet working) will restore and configure a dump file.

- You can use the ssl only checkbox if you want the url to be only accessible through ssl. All users will be redirected on the SSL port of the proxy.

- You can check the test checkbox to install the application with the demo data.

- Check the public checkbox if you want all users of the Clouder to be able to use this base. Otherwise, a user can only access a base if he is the manager of this base (or an administrator).

- You can use the Backup checkbox to auto-backup this base.

.. image:: images/gettingstarted-base.png

See the `Applications <applications.html>`_ chapter for more informations about options and links.

When you save the new base :

- The new database will be created.

- The commands post creation will configure the base.

- The admin and poweruser will be created.

- If test is checked, the demo data will be installed.

- The links will be deployed.

You can check all the executed commands in the log.

.. image:: images/base-log.png

If something went wrong, you can use the reinstall button to purge and reinstall the base.

Finally, you have to configure in the save tab the backup container where the backup will be stored. See the `Applications <applications.html>`_ chapter for more information about the others fields.
You can use the Backup button to force a manual backup, use the comment field if you want to easily find this backup later. Note that all saves update the next save date field.

.. image:: images/base-backup.png

